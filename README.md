# Итоговая работа по модулю «Мобильная разработка в 1С»

Навыки, полученные после выполнения курсовой работы, помогут разрабатывать приложения для использования внутри компании и клиентами.

### Цель

Реализовать мобильное приложение для курьера, работающее совместно с конфигурацией «Торговое предприятие».

## Ссылки на репозитории с конфиигурациями по проекту с примерами кода

[Десктопная версия конфигурации](https://github.com/MaryanaSl/Project3_desk)
[Мобильная версия конфигурации](https://github.com/MaryanaSl/Project3_mobile)

### Описание задачи

Реализовать мобильное приложение для курьеров со следующими функциями:
* получение списка своих заказов из центральной базы;
* возможность установить статус заказам из перечня: «Запланирован», «Взят в работу», «Отклонён курьером», «Отклонён клиентом». При установке статуса «Отклонён курьером» или «Отклонён клиентом» курьер должен указать комментарий;
* прикрепление к заказу фото с информацией о выполненной доставке;
* транспорт статуса заказа, комментария курьера и фото в десктопную базу при очередном сеансе обмена данными;
* возможность выполнять звонки клиентам, которым запланирована доставка, с помощью встроенных средств телефонии.

### В процессе выполнения работы реализовано:

1. В мобильном приложении создан документ «Доставка» с реквизитами «Контрагент», «АдресДоставки», «Комментарий» и табличная часть «Товары» с колонками «Номенклатура» и «Количество».
2. Реализовано хранение «Номенклатуры» и «Контрагентов» в отдельных справочниках.
3. Добавлен в документ «Доставка» реквизит «Фото», реализована возможность создать фото с помощью камеры мобильного устройства и вывести его на форму.
4. Добавлен в документ «Доставка» реквизит «Статус», ссылка на перечисление «Статусы доставок». Элементы перечисления: «Запланирован», «Взят в работу», «Отклонён курьером», «Отклонён клиентом», «Выполнен». Аналогичный реквизит и перечисление добавлен в десктопную базу. При выборе статуса «Отклонён курьером» или «Отклонён клиентом» система требует заполнить комментарий.
5. В десктопном приложении на базе БСП, реализован план обмена для регистрации изменений документа «Доставка» с выключенной авторегистрацией. У плана обмена есть реквизит «Пользователь». Реализована регистрация документа «Доставка» на всех узлах плана обмена, у которых значение реквизита «Пользователь» заполнено и соответствует значению реквизита «Ответственный документа».
6. Реализован HTTP-сервис для обмена с мобильным приложением. Создана роль для работы с сервисом и пользователя с логином **Курьер**. Сервис:
    - при первом вызове инициализирует необходимые узлы планов обмена и выполняет первичную регистрацию объектов — документов «Доставка»‎, в которых реквизит «Ответственный»‎ соответствует текущему пользователю;
    - в качестве ответа передает сериализованные данные документов, зарегистрированные на узле плана обмена, соответствующих устройству.
7. Реализован на стороне мобильного приложения механизм синхронизации данных:
    - созданы константы для хранения адреса подключения к базе, логина и пароля;
    - создана обработка с командой для выполнения синхронизации данных;
    - в рамках синхронизации данных выполнен вызов сервиса, созданного на предыдущем шаге, и созданы документы, которые получены из центральной базы.
8. В результате запуска обмена документа «Доставка»‎ попадает в мобильное приложение.
9. В десктопном приложении реализована возможность хранения фото в документе «Доставка»‎. Выведено изображение на форму документа.
10. В мобильном приложении создан план обмена и реализована регистрация документов «Доставка»‎ при записи.
11. На стороне десктопного приложения доработан сервис для обмена с мобильным приложением методом по приёму данных фотографии.
12. На стороне мобильного приложения доработана команда «Синхронизации данных»‎ — после получения данных из десктопной информационной базы выгружаются фотографии из зарегистрированных на узле плана обмена документов.

### Проверка результата разработки

1. Создано в десктопном приложении два пользователя с ролью курьер.
2. Создано несколько заказов, распределены между двумя курьерами.
3. Настроено в мобильном приложении подключение к центральной базе, при синхронизации в приложение поступили только заказы выбранного курьера.
4. Есть возможность набрать номер клиента с помощью средств телефонии.
5. Есть возможность изменить статус доставки и указать комментарий.
6. Есть возможность прикрепить фото к доставке.
7. При очередной синхронизации статусы, комментарии и фото поступают в центральную базу и есть возможность их посмотреть.
